<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Rails_Todoの製作手順めも | Note</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/imgs/icons/icon.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="shortcut icon" href="/imgs/icons/favicon.ico">
    <meta name="description" content="TodoアプリをRailsで作る過程を綴っていきます.">
    <meta name="theme-color" content="#3eaf7c">
    
    <link rel="preload" href="/assets/css/0.styles.e16f9711.css" as="style"><link rel="preload" href="/assets/js/app.8f13348e.js" as="script"><link rel="preload" href="/assets/js/2.b8499f1b.js" as="script"><link rel="preload" href="/assets/js/76.715ed094.js" as="script"><link rel="preload" href="/assets/js/3.31e57b96.js" as="script"><link rel="prefetch" href="/assets/js/10.40ac406d.js"><link rel="prefetch" href="/assets/js/11.9f9aca41.js"><link rel="prefetch" href="/assets/js/12.59e3ba93.js"><link rel="prefetch" href="/assets/js/13.8d4197cb.js"><link rel="prefetch" href="/assets/js/14.e91349e4.js"><link rel="prefetch" href="/assets/js/15.5fd33358.js"><link rel="prefetch" href="/assets/js/16.8166e7a5.js"><link rel="prefetch" href="/assets/js/17.33cce054.js"><link rel="prefetch" href="/assets/js/18.5ea8b8bc.js"><link rel="prefetch" href="/assets/js/19.a0a1c52a.js"><link rel="prefetch" href="/assets/js/20.a8a43b76.js"><link rel="prefetch" href="/assets/js/21.7a34b1b3.js"><link rel="prefetch" href="/assets/js/22.f74adf24.js"><link rel="prefetch" href="/assets/js/23.b94c0779.js"><link rel="prefetch" href="/assets/js/24.f73cccb6.js"><link rel="prefetch" href="/assets/js/25.2bc2c161.js"><link rel="prefetch" href="/assets/js/26.3a384f9f.js"><link rel="prefetch" href="/assets/js/27.6a7165c8.js"><link rel="prefetch" href="/assets/js/28.0ec597fe.js"><link rel="prefetch" href="/assets/js/29.7d7fa834.js"><link rel="prefetch" href="/assets/js/30.6d64f107.js"><link rel="prefetch" href="/assets/js/31.c12ab2ca.js"><link rel="prefetch" href="/assets/js/32.477c0f3c.js"><link rel="prefetch" href="/assets/js/33.315baaed.js"><link rel="prefetch" href="/assets/js/34.d6ea7706.js"><link rel="prefetch" href="/assets/js/35.d89d1f92.js"><link rel="prefetch" href="/assets/js/36.bebf569c.js"><link rel="prefetch" href="/assets/js/37.540b03c2.js"><link rel="prefetch" href="/assets/js/38.9f371b2a.js"><link rel="prefetch" href="/assets/js/39.624a65d5.js"><link rel="prefetch" href="/assets/js/4.00d6b6ad.js"><link rel="prefetch" href="/assets/js/40.a1ebcf8d.js"><link rel="prefetch" href="/assets/js/41.68c40b87.js"><link rel="prefetch" href="/assets/js/42.caea1831.js"><link rel="prefetch" href="/assets/js/43.ea09fc54.js"><link rel="prefetch" href="/assets/js/44.78668bc3.js"><link rel="prefetch" href="/assets/js/45.9fc3017a.js"><link rel="prefetch" href="/assets/js/46.8ae11a8d.js"><link rel="prefetch" href="/assets/js/47.cf076206.js"><link rel="prefetch" href="/assets/js/48.c85f5a87.js"><link rel="prefetch" href="/assets/js/49.a1176862.js"><link rel="prefetch" href="/assets/js/5.1d72ad79.js"><link rel="prefetch" href="/assets/js/50.afe5718f.js"><link rel="prefetch" href="/assets/js/51.f2bfb70d.js"><link rel="prefetch" href="/assets/js/52.b2885cb5.js"><link rel="prefetch" href="/assets/js/53.1d582d3c.js"><link rel="prefetch" href="/assets/js/54.cb29a67b.js"><link rel="prefetch" href="/assets/js/55.228dfb74.js"><link rel="prefetch" href="/assets/js/56.91f7d1f6.js"><link rel="prefetch" href="/assets/js/57.234c0f32.js"><link rel="prefetch" href="/assets/js/58.5c7573ed.js"><link rel="prefetch" href="/assets/js/59.348a3966.js"><link rel="prefetch" href="/assets/js/6.5a204597.js"><link rel="prefetch" href="/assets/js/60.6c1fe685.js"><link rel="prefetch" href="/assets/js/61.79675466.js"><link rel="prefetch" href="/assets/js/62.0cbcaeb4.js"><link rel="prefetch" href="/assets/js/63.b144eae4.js"><link rel="prefetch" href="/assets/js/64.41a0b9c0.js"><link rel="prefetch" href="/assets/js/65.70dd98e0.js"><link rel="prefetch" href="/assets/js/66.5a7f9c73.js"><link rel="prefetch" href="/assets/js/67.e66744bf.js"><link rel="prefetch" href="/assets/js/68.aba408a9.js"><link rel="prefetch" href="/assets/js/69.0cf2f5a7.js"><link rel="prefetch" href="/assets/js/7.0b1e9a07.js"><link rel="prefetch" href="/assets/js/70.56b949f8.js"><link rel="prefetch" href="/assets/js/71.17a8ef26.js"><link rel="prefetch" href="/assets/js/72.d536efbe.js"><link rel="prefetch" href="/assets/js/73.86a8a077.js"><link rel="prefetch" href="/assets/js/74.ebda6bc5.js"><link rel="prefetch" href="/assets/js/75.ecc0ca7f.js"><link rel="prefetch" href="/assets/js/77.63bbfc61.js"><link rel="prefetch" href="/assets/js/78.d5e994a5.js"><link rel="prefetch" href="/assets/js/79.fbefbb0d.js"><link rel="prefetch" href="/assets/js/8.7d241289.js"><link rel="prefetch" href="/assets/js/80.b6151b9a.js"><link rel="prefetch" href="/assets/js/81.4f6027d0.js"><link rel="prefetch" href="/assets/js/82.6e7574a0.js"><link rel="prefetch" href="/assets/js/83.898f1a42.js"><link rel="prefetch" href="/assets/js/84.8f738cd7.js"><link rel="prefetch" href="/assets/js/85.a6e055e8.js"><link rel="prefetch" href="/assets/js/86.09437ec0.js"><link rel="prefetch" href="/assets/js/87.5e26e887.js"><link rel="prefetch" href="/assets/js/88.a3490bcb.js"><link rel="prefetch" href="/assets/js/9.b6cc432c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e16f9711.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/#links" class="nav-link">Links</a></div><div class="nav-item"><a href="/tags/" class="nav-link">Articles</a></div><div class="nav-item"><a href="/chukapi_fun_art.html" class="nav-link">Chukapi-Fun-Art</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/#links" class="nav-link">Links</a></div><div class="nav-item"><a href="/tags/" class="nav-link">Articles</a></div><div class="nav-item"><a href="/chukapi_fun_art.html" class="nav-link">Chukapi-Fun-Art</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Rails_Todoの製作手順めも</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/article/rails_todo.html#homeアクションとaboutアクションを追加" class="sidebar-link">homeアクションとaboutアクションを追加</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#内容の編集" class="sidebar-link">内容の編集</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#テストの作成" class="sidebar-link">テストの作成</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#埋め込みruby" class="sidebar-link">埋め込みRuby</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#html5のサポート" class="sidebar-link">html5のサポート</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#bootstrapの追加" class="sidebar-link">bootstrapの追加</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#bootstrapの効果" class="sidebar-link">bootstrapの効果</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#renderメソッドによる分散コーディング" class="sidebar-link">renderメソッドによる分散コーディング</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#アセットパイプライン" class="sidebar-link">アセットパイプライン</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#フルプロセッサエンジン" class="sidebar-link">フルプロセッサエンジン</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#リンクのテスト-統合テスト" class="sidebar-link">リンクのテスト(統合テスト)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#モデルのバリデーション" class="sidebar-link">モデルのバリデーション</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#dbのmigrate" class="sidebar-link">dbのmigrate</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#signup" class="sidebar-link">signup</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#sessionsコントローラを生成-newアクションを追加" class="sidebar-link">sessionsコントローラを生成(newアクションを追加)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#ルートを追加" class="sidebar-link">ルートを追加</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#ルートを確認する" class="sidebar-link">ルートを確認する</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#flashメッセージで報告" class="sidebar-link">flashメッセージで報告</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#トグルメニューの追加" class="sidebar-link">トグルメニューの追加</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#ログアウト" class="sidebar-link">ログアウト</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#controller間のインスタンス参照" class="sidebar-link">Controller間のインスタンス参照</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#twitter認証" class="sidebar-link">Twitter認証</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#api管理のためのgit-crypt" class="sidebar-link">API管理のためのgit-crypt</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/rails_todo.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/article/rails_todo.html#_5-gpgによる鍵の生成" class="sidebar-link">5. gpgによる鍵の生成</a></li><li class="sidebar-sub-header"><a href="/article/rails_todo.html#_6-git-cryptの設定" class="sidebar-link">6. git-cryptの設定</a></li></ul></li><li><a href="/article/rails_todo.html#poiorityの実装方法" class="sidebar-link">poiorityの実装方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/rails_todo.html#実装" class="sidebar-link">実装</a></li></ul></li><li><a href="/article/rails_todo.html#modal-windowの実装" class="sidebar-link">Modal Windowの実装</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#それのチュートリアル" class="sidebar-link">それのチュートリアル</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#設計" class="sidebar-link">設計</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/rails_todo.html#_1-top-page" class="sidebar-link">1.Top-Page</a></li><li class="sidebar-sub-header"><a href="/article/rails_todo.html#_2-modal-page" class="sidebar-link">2.Modal-Page</a></li><li class="sidebar-sub-header"><a href="/article/rails_todo.html#_3-top-page" class="sidebar-link">3.Top-Page</a></li><li class="sidebar-sub-header"><a href="/article/rails_todo.html#renderとredirect-toの違い" class="sidebar-link">renderとredirect_toの違い</a></li></ul></li><li><a href="/article/rails_todo.html#heap-treeの改良" class="sidebar-link">Heap-Treeの改良</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#ajax通信" class="sidebar-link">Ajax通信</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#modal-windowの実装の続き-前はこっち" class="sidebar-link">Modal Windowの実装の続き(前はこっち)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#twitter認証-2" class="sidebar-link">Twitter認証</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/rails_todo.html#initialize" class="sidebar-link">Initialize</a></li><li class="sidebar-sub-header"><a href="/article/rails_todo.html#twitter-authentication" class="sidebar-link">Twitter Authentication</a></li><li class="sidebar-sub-header"><a href="/article/rails_todo.html#bugfix" class="sidebar-link">bugfix</a></li><li class="sidebar-sub-header"><a href="/article/rails_todo.html#twitterのみでログイン可能にする" class="sidebar-link">Twitterのみでログイン可能にする</a></li><li class="sidebar-sub-header"><a href="/article/rails_todo.html#めも" class="sidebar-link">めも</a></li><li class="sidebar-sub-header"><a href="/article/rails_todo.html#参考資料" class="sidebar-link">参考資料</a></li></ul></li><li><a href="/article/rails_todo.html#task-model-controllersの移行" class="sidebar-link">Task Model &amp; Controllersの移行</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#メニューにtwitterloginを実装" class="sidebar-link">メニューにTwitterLoginを実装</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#herokuにデプロイ" class="sidebar-link">Herokuにデプロイ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#結果" class="sidebar-link">結果</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#ブラウザの対応" class="sidebar-link">ブラウザの対応</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#twitterへのメンション" class="sidebar-link">Twitterへのメンション</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#レスポンシブデザイン" class="sidebar-link">レスポンシブデザイン</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/article/rails_todo.html#タスクの全表示がない" class="sidebar-link">タスクの全表示がない</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/rails_todo.html#設計-2" class="sidebar-link">設計</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rails-todoの製作手順めも"><a href="#rails-todoの製作手順めも" class="header-anchor">#</a> Rails_Todoの製作手順めも</h1> <h1 id="_12-26"><a href="#_12-26" class="header-anchor">#</a> 12/26</h1> <ol><li>rootのToppageの作成</li></ol> <h2 id="homeアクションとaboutアクションを追加"><a href="#homeアクションとaboutアクションを追加" class="header-anchor">#</a> homeアクションとaboutアクションを追加</h2> <p>$ rails generate controller StaticPages home about
($ rails generate controller {ControllerName} {action_name}+)</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Running via Spring preloader <span class="token keyword">in</span> process <span class="token number">30664</span>
      create  app/controllers/static_pages_controller.rb
       route  get <span class="token string">'static_pages/about'</span>
       route  get <span class="token string">'static_pages/home'</span>
      invoke  erb
      create    app/views/static_pages
      create    app/views/static_pages/home.html.erb
      create    app/views/static_pages/about.html.erb
      invoke  test_unit
      create    test/controllers/static_pages_controller_test.rb
      invoke  helper
      create    app/helpers/static_pages_helper.rb
      invoke    test_unit
      invoke  assets
      invoke    coffee
      create      app/assets/javascripts/static_pages.coffee
      invoke    scss
      create      app/assets/stylesheets/static_pages.scss
</code></pre></div><p>結果, <code>$rails s</code>すると, 以下のページにアクセス可能になる。</p> <ul><li>http://192.168.33.10:3000/static_pages/home</li> <li>http://192.168.33.10:3000/static_pages/about</li></ul> <h2 id="内容の編集"><a href="#内容の編集" class="header-anchor">#</a> 内容の編集</h2> <p>表示される内容はViewにあたるので, 以下のパスに存在している。</p> <ul><li>/app/views/static_pages/home</li> <li>/app/views/static_pages/about</li></ul> <h2 id="テストの作成"><a href="#テストの作成" class="header-anchor">#</a> テストの作成</h2> <p>テストは<code>/test/controllers/</code>以下に存在する。</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># test/controllers/static_pages_controller_test.rb</span>
<span class="token operator">~</span>
test “should get home” <span class="token keyword">do</span>
  <span class="token comment"># homeページにGETリクエスト</span>
  get static_pages_home_url
  <span class="token comment"># レスポンスがGREENになるはず</span>
  assert_response <span class="token symbol">:success</span>
<span class="token keyword">end</span>
<span class="token operator">~</span>
</code></pre></div><p>テスト駆動開発はテストから作る。</p> <ul><li><p>リクエストして, 正しくレスポンスされるかを確認する
{get/post} {page_url}
assert_response :success</p></li> <li><p>オブジェクトが存在するかを確認
assert_select “{object_name(e.g. title)}”, “{Screening text}”</p></li></ul> <h2 id="埋め込みruby"><a href="#埋め込みruby" class="header-anchor">#</a> 埋め込みRuby</h2> <ul><li><code>&lt;% …% &gt;</code> := 中に書かれたコードを実行するだけ</li> <li><code>&lt;%= …% &gt;</code> := 中に書かれたコードの実行結果がそこに挿入される</li></ul> <p><code>provide</code>メソッドを使用してタイトルをページごとに変更する。</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>app<span class="token operator">/</span>view<span class="token operator">/</span>static_pages<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>html<span class="token punctuation">.</span>erb
<span class="token operator">&lt;</span><span class="token operator">%</span> provide<span class="token punctuation">(</span><span class="token symbol">:title</span><span class="token punctuation">,</span> “<span class="token constant">Help</span>”<span class="token punctuation">)</span> <span class="token string">%&gt;
~
&lt;%= yield(:title) %&gt;</span>
</code></pre></div><p>ページのレイアウトは<code>app/views/layouts/application.html.erb</code>以下に存在している。これを用いることで, <code>provide</code>メソッドを各ファイルで定義し, <code>yield</code>メソッドを書く必要がなくなる。</p> <h2 id="html5のサポート"><a href="#html5のサポート" class="header-anchor">#</a> html5のサポート</h2> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token punctuation">[</span><span class="token keyword">if</span> lt <span class="token constant">IE</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.min.js&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span>endif<span class="token punctuation">]</span><span class="token operator">--</span><span class="token operator">&gt;</span>
</code></pre></div><h2 id="bootstrapの追加"><a href="#bootstrapの追加" class="header-anchor">#</a> bootstrapの追加</h2> <p>app/assets/stylesheet/custom.scssに,
@import bootstrap
@import bootstrap-sprockets
を追加</p> <h2 id="bootstrapの効果"><a href="#bootstrapの効果" class="header-anchor">#</a> bootstrapの効果</h2> <ul><li><p>navbar navbar-fixed-top := nav要素を上に表示</p></li> <li><p>navbar-inverse := 色反転</p></li> <li><p>nav navbar-nav navbar-right := navbar内のnav要素を右に表示</p></li> <li><p>jumbotran := 背景をそれっぽく覆う</p></li></ul> <h2 id="renderメソッドによる分散コーディング"><a href="#renderメソッドによる分散コーディング" class="header-anchor">#</a> renderメソッドによる分散コーディング</h2> <p><code>&lt;%= render layouts/hoge%&gt;</code>と書くと, app/views/layout/_hoge.html.erbを参照する。</p> <h2 id="アセットパイプライン"><a href="#アセットパイプライン" class="header-anchor">#</a> アセットパイプライン</h2> <ul><li>app/assets := 現在のアプリケーション固有のアセット</li> <li>lib/assets := 開発チームによって作成されたライブラリ用のアセット</li> <li>vendor/assets := サードパーティのアセット</li></ul> <h2 id="フルプロセッサエンジン"><a href="#フルプロセッサエンジン" class="header-anchor">#</a> フルプロセッサエンジン</h2> <p>chain可能で, 順番に参照して結合する。
末尾から実行される。
e.g.) hoge.js.coffee.erbだと, erb→coffeeScriptの順番</p> <h2 id="リンクのテスト-統合テスト"><a href="#リンクのテスト-統合テスト" class="header-anchor">#</a> リンクのテスト(統合テスト)</h2> <p>$ rails generate integration_test {test_name}
test/integration/{test_name}_test.rbが作成される</p> <h1 id="_12-27"><a href="#_12-27" class="header-anchor">#</a> 12/27</h1> <h1 id="usersモデルの作成"><a href="#usersモデルの作成" class="header-anchor">#</a> Usersモデルの作成</h1> <p>まずはコントローラを作成</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ rails g controller Users new
<span class="token comment"># Usersコントローラにnewアクションを与える</span>
</code></pre></div><p>次にモデルを作成
$ rails g model User name: string email string</p> <h2 id="モデルのバリデーション"><a href="#モデルのバリデーション" class="header-anchor">#</a> モデルのバリデーション</h2> <p>app/models/user.rb以下に記入
validate {要素名}, オプション</p> <p>presence := 存在しているか
length := 文字列長(maximum, minimum, etc…)
uniqueness := 一意性があるか{ case_sensitive: false }で大文字小文字を区別しない
format: {with: } := 正規表現
/ := 正規表現の開始と終端
\A := 文字列の先頭
[\w+-.]+ := 英数字, _, +, -, .のいずれかを少なくとも1回繰り返す
@ := アットマーク
[a-z\d-.]+ := 英小文字, 数字, -, . のいずれか1つを少なくとも1文字以上繰り返す
. := ドット
[a-z]+ := 英小文字を少なくとも1回以上繰り返す
\z := 文字列の末尾
i := 大文字小文字を無視するオプション</p> <h2 id="dbのmigrate"><a href="#dbのmigrate" class="header-anchor">#</a> dbのmigrate</h2> <p>ファイル直接書き換えの場合は, $ rails db:migrate:reset</p> <h1 id="usersリソース"><a href="#usersリソース" class="header-anchor">#</a> Usersリソース</h1> <p>config/routes.rbに
resources :usersを追加。</p> <p>すると, index, show, new, create, edit, update, destroyが使用可能になる。
アクションの定義は, app/controllers/users_controller.rbで行う。
def {action_name}
…
end
で追加できる。</p> <p>debuggerを追加するとbybugが使用可能になる。</p> <h2 id="signup"><a href="#signup" class="header-anchor">#</a> signup</h2> <p>app/views/users/new.html.erbに追加。
明日はSignupのテストから。</p> <p>テスト終わり
assert_template
assert_select := 以降のテキストが存在しているか
content_tag := 以降の要素をタグとしてhtmlを作成
assert_no_difference := その中の行為で要素の変更がないことをテストする</p> <h1 id="sessions-login-logout"><a href="#sessions-login-logout" class="header-anchor">#</a> sessions(login, logout)</h1> <h2 id="sessionsコントローラを生成-newアクションを追加"><a href="#sessionsコントローラを生成-newアクションを追加" class="header-anchor">#</a> sessionsコントローラを生成(newアクションを追加)</h2> <p>$ rails g controller Sessions new</p> <h2 id="ルートを追加"><a href="#ルートを追加" class="header-anchor">#</a> ルートを追加</h2> <p>get    '/login',   to: 'sessions#new'
post   '/login',   to: 'sessions#create'
delete '/logout',  to: 'sessions#destroy'</p> <h2 id="ルートを確認する"><a href="#ルートを確認する" class="header-anchor">#</a> ルートを確認する</h2> <p>$ rails routes</p> <h2 id="flashメッセージで報告"><a href="#flashメッセージで報告" class="header-anchor">#</a> flashメッセージで報告</h2> <p>def createの部分にflash.now[:danger] = ‘Invalid’を追加すると良い</p> <h2 id="トグルメニューの追加"><a href="#トグルメニューの追加" class="header-anchor">#</a> トグルメニューの追加</h2> <p>class=“dropdown-toggle”を追加すればおk</p> <h2 id="ログアウト"><a href="#ログアウト" class="header-anchor">#</a> ログアウト</h2> <p>helperに追加
session.delete(:user_id)
@current_user = nil
でおk。セッションを切っても@curernt_userはそのままなので, nilで上書きする</p> <p>その後, controllerに追加
controllerに全部書いてもいいが, 中身が大きくなりすぎるので, helperを用いて分割する。</p> <h1 id="todo"><a href="#todo" class="header-anchor">#</a> todo</h1> <p>rails g model Task title:string
rails g controller Tasks
ルーティングの追加</p> <p>他のアクションの追加
new, create
viewの追加
edit, update</p> <p>controllerで宣言したresourceはviewでも利用可能</p> <h1 id="_1-27"><a href="#_1-27" class="header-anchor">#</a> 1/27</h1> <h2 id="controller間のインスタンス参照"><a href="#controller間のインスタンス参照" class="header-anchor">#</a> Controller間のインスタンス参照</h2> <p>他のコントローラのインスタンスは参照できないので, そのコントローラで他のコントローラを呼び出せばよい.<br>
以下のような感じ.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">/</span><span class="token operator">/</span> app<span class="token operator">/</span>controllers<span class="token operator">/</span>static_pages_controller<span class="token punctuation">.</span>rb
<span class="token keyword">class</span> <span class="token class-name">StaticPagesController</span> <span class="token operator">&lt;</span> <span class="token constant">ApplicationController</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">home</span></span>
    <span class="token variable">@user</span> <span class="token operator">=</span> current_user <span class="token keyword">if</span> logged_in<span class="token operator">?</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">/</span><span class="token operator">/</span> app<span class="token operator">/</span>controllers<span class="token operator">/</span>helpers<span class="token operator">/</span>sessions_helper<span class="token punctuation">.</span>rb
<span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span>
<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">current_user</span></span>
  <span class="token keyword">if</span> session<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span>
    <span class="token variable">@current_user</span> <span class="token operator">||</span><span class="token operator">=</span> <span class="token constant">User</span><span class="token punctuation">.</span>find_by<span class="token punctuation">(</span>id<span class="token punctuation">:</span> session<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span>
</code></pre></div><h2 id="twitter認証"><a href="#twitter認証" class="header-anchor">#</a> Twitter認証</h2> <p><a href="https://github.com/AGWA/git-crypt" target="_blank" rel="noopener noreferrer"><code>git-crypt</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>を使うと良いらしい?</p> <h2 id="api管理のためのgit-crypt"><a href="#api管理のためのgit-crypt" class="header-anchor">#</a> API管理のためのgit-crypt</h2> <p><a href="https://github.com/AGWA/git-crypt" target="_blank" rel="noopener noreferrer">git-crypt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h3> <p><a href="https://github.com/AGWA/git-crypt/blob/master/INSTALL.md" target="_blank" rel="noopener noreferrer">Install.md<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>に書いてある.</p> <h4 id="_1-clone"><a href="#_1-clone" class="header-anchor">#</a> 1. clone</h4> <p>リポジトリをクローン.<br> <code>$ git clone https://github.com/AGWA/git-crypt.git</code></p> <h4 id="_2-makeしてmake-install"><a href="#_2-makeしてmake-install" class="header-anchor">#</a> 2. <code>make</code>して<code>make install</code></h4> <div class="language- extra-class"><pre class="language-text"><code>$ make
$ make install
</code></pre></div><h4 id="_3-gpgで作るための-confファイルを作成"><a href="#_3-gpgで作るための-confファイルを作成" class="header-anchor">#</a> 3. <code>gpg</code>で作るための<code>*.conf</code>ファイルを作成</h4> <p>いちいち入力してるとミスがあったときに困るので, <code>.conf</code>ファイルで設定します.<br>
(今回はkey-gen.confとします).<br>
ファイルの内容は以下の通り.</p> <div class="language- extra-class"><pre class="language-text"><code>// key-gen.conf
Key-Type: RSA
Key-Length: 4096

SubKey-Type: RSA
SubKey-Length: 4096

Expire-Date: 2y           // 期間(お好みでok)

Name-Real: {real-name}    // 名前をここに入力
Name-Email: {email}       // emailアドレスをここに入力

passphrase: {pass-phrase} // pass-phraseをここに入力

%commit                   
%echo Successfully done
</code></pre></div><h4 id="_4-rng-toolsのインストール"><a href="#_4-rng-toolsのインストール" class="header-anchor">#</a> 4. rng-toolsのインストール</h4> <p>このまま<code>$ gpg --gen-key --batch key-gen.conf</code>をしても良いが, かなり時間がかかるので<code>rng-tools</code>パッケージを使う。</p> <blockquote><p>rngd は /dev/hwrng から乱数を得て, カーネルのエントロピープールに乱数を提供します. rngd はあくまでカーネルのエントロピープールに乱数を提供するのみで, ハードウェア乱数生成器のデータを直接 /dev/random 等から出力するのでありません. また rngd は入力されたデータが本当にランダムかどうか, FIPS 140-2 (2002-10-10) テストを行ってくれます.</p></blockquote> <blockquote><p>ハードウェア乱数生成器を利用することで /dev/random からより高速に乱数を生成することができます. ハードウェア乱数生成器を利用しない場合と利用する場合の生成速度の違いは以下のようになります.
(引用:<a href="https://blog.ymyzk.com/2015/05/raspberry-pi-hardware-random-number-generator/" target="_blank" rel="noopener noreferrer">Raspberry Pi のハードウェア乱数生成器を利用する<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p></blockquote> <p>私はCentOS7を利用しているので, 以下のコマンドを叩きました.<br>
(環境に応じてコマンドを変更してください)</p> <div class="language- extra-class"><pre class="language-text"><code>$ sudo yum install rng-tools
</code></pre></div><h3 id="_5-gpgによる鍵の生成"><a href="#_5-gpgによる鍵の生成" class="header-anchor">#</a> 5. gpgによる鍵の生成</h3> <p>以下のコマンドを実行して鍵を生成します.</p> <div class="language- extra-class"><pre class="language-text"><code>$ gpg --gen-key --batch ./key-gen.conf
</code></pre></div><p>その後, 別のterminalを開き, 以下のコマンドを実行します.</p> <div class="language- extra-class"><pre class="language-text"><code>$ sudo rngd -r /dev/urandom
</code></pre></div><p>すると, 最初の<code>gpg</code>コマンドの方で, 以下のように出力されるはずです.</p> <div class="language- extra-class"><pre class="language-text"><code>gpg --gen-key --batch ./key-gen.conf
gpg: 鍵*を絶対的に信用するよう記録しました
gpg: Successfully done
</code></pre></div><h3 id="_6-git-cryptの設定"><a href="#_6-git-cryptの設定" class="header-anchor">#</a> 6. git-cryptの設定</h3> <p>設定は, <code>.gitattributes</code>に以下のように書き込みます.<br>
ここで, {file-name}の部分には暗号化したいファイル名を入れます.</p> <div class="language- extra-class"><pre class="language-text"><code>// .gitattributes
{file-name} filter=git-crypt diff=git-crypt

e.g.)  
API-KEY.xml filter=git-crypt diff=git-crypt
</code></pre></div><p>その後, 以下のコマンドでGPGで生成した鍵を特定できる文字列を入れます.<br>
私はgpgで鍵を生成したときの<code>email</code>を入れました.</p> <div class="language- extra-class"><pre class="language-text"><code>$ git-crypt add-gpg-user {email}

e.g.) 
$ git-crypt add-gpg-user hoge@fuga.com
</code></pre></div><h4 id="_7-git-add"><a href="#_7-git-add" class="header-anchor">#</a> 7. git add</h4> <p>あとは, <code>.gitattributes</code>で設定したファイルをステージング(<code>$ git add</code>)します.<br>
暗号化されているファイルは<br> <code>$ git-crypt status -e</code><br>
で確認できます.<br>
もし, 暗号化されていないのにステージングされている場合は,
<code>$ git-crypt status -f</code><br>
で暗号化対象にされるので, OKです.</p> <p>Twitter APPの認証が必要らしいので, 少し待ちます.<br> <a href="https://reasonable-code.com/rails-twitter-auth/" target="_blank" rel="noopener noreferrer">Ruby on RailsでTwitter認証機能を実装してみる<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h1 id="postの設定"><a href="#postの設定" class="header-anchor">#</a> Postの設定</h1> <p><code>app/controllers/shared/_task_form.html.erb</code>が正しく描画されないことが多々あった.</p> <p>その原因は, <code>form_for</code>の引数を<code>@user.tasks</code>というリレーションにしていたからだった.</p> <p>そのため, 新しく<code>@tasks</code>インスタンスを宣言し,<br> <code>static_pages_controller.rb</code>の<code>home</code>アクションで,</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">home</span></span>
  <span class="token operator">~</span><span class="token operator">~</span>
  <span class="token variable">@tasks</span> <span class="token operator">=</span> current_user<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span>build <span class="token keyword">if</span> logged_in<span class="token operator">?</span>
<span class="token keyword">end</span>
</code></pre></div><p>を追記した.</p> <h1 id="_01-30"><a href="#_01-30" class="header-anchor">#</a> 01/30</h1> <h1 id="dbの再構築"><a href="#dbの再構築" class="header-anchor">#</a> DBの再構築</h1> <p><code>$ rails db:reset</code>よりも<code>$ rails db:migrate:reset</code>を使うべき.</p> <ul><li><a href="https://easyramble.com/difference-bettween-rake-db-migrate-reset.html" target="_blank" rel="noopener noreferrer">rake db:reset と rake db:migrate:reset の違い<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="custom-block danger"><p><code>db:reset</code>はmigration fileを編集してもその内容は更新されない.</p></div> <h1 id="_02-01"><a href="#_02-01" class="header-anchor">#</a> 02/01</h1> <h1 id="viewの刷新"><a href="#viewの刷新" class="header-anchor">#</a> Viewの刷新</h1> <p>現時点で必要のなさそうなものを全て取り払った.<br>
特に, 重複しているものなどは, まとめて<code>home.html.erb</code>に全て流し込んだ.<br>
細かい部分は, partialを作って, <code>shared/</code>フォルダに流し込んだ.</p> <h1 id="tasksの表示数の変更"><a href="#tasksの表示数の変更" class="header-anchor">#</a> Tasksの表示数の変更</h1> <p>allではなく, <code>take(num)</code>と書くと, num個の要素を表示できる.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># 3つ選んで表示</span>
<span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">=</span> render <span class="token variable">@user</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span>all<span class="token punctuation">.</span>take<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>
</code></pre></div><p>また, 表示されるデータは, モデルでソートしておくことで, 任意の順序で取り出すことが可能.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">/</span><span class="token operator">/</span> app<span class="token operator">/</span>models<span class="token operator">/</span>task<span class="token punctuation">.</span>rb
<span class="token operator">~</span><span class="token operator">~</span>
<span class="token comment"># priorityをキーとして, 昇順でソート</span>
default_scope <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> order<span class="token punctuation">(</span>priority<span class="token punctuation">:</span> <span class="token symbol">:desc</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> 
<span class="token operator">~</span><span class="token operator">~</span>
</code></pre></div><h1 id="priorityの追加-in-task-model"><a href="#priorityの追加-in-task-model" class="header-anchor">#</a> <code>priority</code>の追加(in Task Model)</h1> <p><code>priority</code>を追加することで, 重要度の高いものを上に持ってくる.</p> <h2 id="poiorityの実装方法"><a href="#poiorityの実装方法" class="header-anchor">#</a> poiorityの実装方法</h2> <p>ヒープ木を持たせるのが良さそう.</p> <h3 id="実装"><a href="#実装" class="header-anchor">#</a> 実装</h3> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">HeapArray</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span>
    <span class="token variable">@heapArr</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">push</span></span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    i <span class="token operator">=</span> <span class="token variable">@heapArr</span><span class="token punctuation">.</span>size
    
    <span class="token keyword">while</span> i <span class="token operator">&gt;</span> <span class="token number">0</span>
      <span class="token comment"># 親のノード番号</span>
      p <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span>
      <span class="token comment"># 逆転してないなら抜ける</span>
      <span class="token comment"># この部分の処理をインタラクティブにすれば良さそう</span>
      <span class="token keyword">break</span> <span class="token keyword">if</span> <span class="token variable">@heapArr</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> n
      <span class="token comment"># 親ノード番号を下ろして, 自分は上に</span>
      <span class="token variable">@heapArr</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@heapArr</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span>
      i <span class="token operator">=</span> p
    <span class="token keyword">end</span>
    <span class="token variable">@heapArr</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> n
  <span class="token keyword">end</span>  
 
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">pop</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    max <span class="token operator">=</span> <span class="token variable">@heapArr</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token comment"># 根に持ってくる要素を取り出す</span>
    n <span class="token operator">=</span> <span class="token variable">@heapArr</span><span class="token punctuation">.</span>pop

    <span class="token keyword">if</span> <span class="token variable">@heapArr</span><span class="token punctuation">.</span>empty<span class="token operator">?</span>
      <span class="token keyword">return</span> max
    <span class="token keyword">end</span>
    
    <span class="token comment"># 根から下ろしていく</span>
    i <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token variable">@heapArr</span><span class="token punctuation">.</span>size
      <span class="token comment"># 子同士を比較</span>
      left <span class="token operator">=</span> i<span class="token operator">*</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span>
      right <span class="token operator">=</span> i<span class="token operator">*</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span>
      <span class="token keyword">if</span> <span class="token operator">!</span><span class="token variable">@heapArr</span><span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">nil</span><span class="token operator">?</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">@heapArr</span><span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token variable">@heapArr</span><span class="token punctuation">[</span>right<span class="token punctuation">]</span>
        left <span class="token operator">=</span> right
      <span class="token keyword">end</span>

      <span class="token keyword">break</span> <span class="token keyword">if</span> <span class="token variable">@heapArr</span><span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> n
      <span class="token variable">@heapArr</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@heapArr</span><span class="token punctuation">[</span>left<span class="token punctuation">]</span>
      i <span class="token operator">=</span> left      
    <span class="token keyword">end</span>
    <span class="token variable">@heapArr</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> n

    <span class="token keyword">return</span> max
  <span class="token keyword">end</span>

<span class="token keyword">end</span>
</code></pre></div><h1 id="_02-02"><a href="#_02-02" class="header-anchor">#</a> 02/02</h1> <h2 id="modal-windowの実装"><a href="#modal-windowの実装" class="header-anchor">#</a> Modal Windowの実装</h2> <p>Ajaxで非同期通信にしたいなという気持ちがある<br> <a href="https://logist3.com/rails5-bootstrap-modalwindow/" target="_blank" rel="noopener noreferrer">これとかどうでしょう(Rails5とBootstrapでモーダルウィンドウ)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="それのチュートリアル"><a href="#それのチュートリアル" class="header-anchor">#</a> それのチュートリアル</h2> <ul><li>bootstrapの前にjqueryをrequireしないとNG(app/assets/javascripts/application.js)</li> <li>基本的に, 同じviewの中で完結させること(Controllerに関しては知らない)</li> <li>Controllerのcreateアクションに応じて, 同じ属性のViewに位置する<code>create.js.erb</code>が呼ばれる</li> <li>new_user_pathの呼び出しがトリガとなり, 同じ属性のViewに位置する<code>new.js.erb</code>が呼ばれる</li></ul> <h2 id="設計"><a href="#設計" class="header-anchor">#</a> 設計</h2> <p>ということは, TaskをPostする上で, 以下のようなページ遷移をさせたい.</p> <h3 id="_1-top-page"><a href="#_1-top-page" class="header-anchor">#</a> 1.Top-Page</h3> <ul><li>Postをonclickでmodalを表示</li> <li><code>&lt;%= link_to ... %&gt;</code>を使うと良さそう</li></ul> <h3 id="_2-modal-page"><a href="#_2-modal-page" class="header-anchor">#</a> 2.Modal-Page</h3> <ul><li><code>decide_priority_task_path</code>をトリガとして, decide.js.erbに遷移
<ul><li>Ajaxで非同期通信したいので, &lt;%= form.submit %&gt;ではなく, &lt;%= link_to %&gt;にする</li> <li>その際, link_toにパラメータを載せたいので, formの内容を<code>decide_priority_task_path()</code>で渡してあげたい(形式がわからない)</li></ul></li> <li><code>decide_priority_task_path</code>に遷移後, ヒープ木に従い<code>@heapArr[p] &gt;= n</code>の処理を繰り返し行う.</li> <li>[a]よりも重要度は高いですか?
<ul><li>Yes: にぶたんのtrue の方</li> <li>No : にぶたんのfalseの方</li></ul></li> <li>結果に応じて, 同じページで<code>render</code>し続ける.</li> <li>(あとn回答えてね, のようなメッセージがあるといいかも)</li> <li>それに応じてボーナスをあげてもいいかも?</li> <li>返り値が<code>false</code>になった時に, <code>f.submit</code>, それ以外は<code>&lt;%= link_to %&gt;</code>でループさせる</li> <li><code>submit</code>したら, そこに決定してroot_pathに遷移</li></ul> <h3 id="_3-top-page"><a href="#_3-top-page" class="header-anchor">#</a> 3.Top-Page</h3> <ul><li><code>flash[:success]</code>で, メッセージを表示</li></ul> <s>
### decide.js.erb
ここだけ`Query`モデルを作って, そこでループさせてもいい気がしてきた. </s> <h3 id="renderとredirect-toの違い"><a href="#renderとredirect-toの違い" class="header-anchor">#</a> renderとredirect_toの違い</h3> <ul><li>renderは別のページをそこに描画</li> <li>redirect_toはそのページに遷移</li></ul> <h2 id="heap-treeの改良"><a href="#heap-treeの改良" class="header-anchor">#</a> Heap-Treeの改良</h2> <p>以前のものだと, ソートされていなかったため, ソート機構を加えた.<br> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(NlogN)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">~</span><span class="token operator">~</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">heap_sort</span></span>
    _size <span class="token operator">=</span> <span class="token variable">@heapArr</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token variable">@retArr</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    _size<span class="token punctuation">.</span>times <span class="token keyword">do</span>
      <span class="token variable">@retArr</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span>pop<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token variable">@heapArr</span> <span class="token operator">=</span> <span class="token variable">@retArr</span>
  <span class="token keyword">end</span>
<span class="token operator">~</span><span class="token operator">~</span>
</code></pre></div><h2 id="ajax通信"><a href="#ajax通信" class="header-anchor">#</a> Ajax通信</h2> <ul><li><p>アクションが呼ばれると, そのアクションに対応した<code>{action_name}.js.erb</code>が呼び出される.</p></li> <li><p>この<code>js.erb</code>は, そのアクションに対応するController名と同じView以下に設置する.</p></li> <li><p>Controllerの返り値は, <code>respond_to</code>で形式を変更する必要がある.</p> <ul><li><code>format.html</code>, <code>format.js</code>等</li></ul></li> <li><p><a href="https://qiita.com/__tambo__/items/45211df065e0c037d032" target="_blank" rel="noopener noreferrer">これとか<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://railstutorial.jp/chapters/following_users?version=4.2#sec-a_working_follow_button_with_ajax" target="_blank" rel="noopener noreferrer">これとか<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>が参考になるかも?</p></li></ul> <h1 id="_02-03"><a href="#_02-03" class="header-anchor">#</a> 02/03</h1> <h2 id="modal-windowの実装の続き-前はこっち"><a href="#modal-windowの実装の続き-前はこっち" class="header-anchor">#</a> Modal Windowの実装の続き(<a href="#modal-window%E3%81%AE%E5%AE%9F%E8%A3%85">前はこっち</a>)</h2> <p>画面遷移はできているので, 実装をするだけ(それが難しい)</p> <p>午後は実装する.
やることのまとめ.</p> <ul><li>view/static_pages/home.html.erb&lt;%= link_to tasks_path %&gt;</li></ul> <h1 id="_02-05"><a href="#_02-05" class="header-anchor">#</a> 02/05</h1> <h2 id="twitter認証-2"><a href="#twitter認証-2" class="header-anchor">#</a> Twitter認証</h2> <h3 id="initialize"><a href="#initialize" class="header-anchor">#</a> Initialize</h3> <p>Gem <code>omniauth-twitter</code>と<code>device</code>で実装.</p> <ul><li>Gemfileに追記</li> <li><code>$ rails g devise:install</code>でdeviceのインストール
<ul><li>device使いますよ, という意思表示</li></ul></li> <li>デフォルトMailUrlの設定(<code>config/environments/development.rb</code>に<code>config.action_mailer.default_url_options = { host: '0.0.0.0', port: '3000' }</code>を追加</li> <li>RootUrlの設定
<ul><li><code>config/routes</code>に追記</li></ul></li> <li>Devise用のViewを作成(<code>$ rails g devise:views</code>)</li> <li>Devise用のUserModelの作成(<code>$ rails g devise User</code>)</li> <li>Omniauth-twitter用のカラムを追加(<code>$ rails g migration add_columns_to_users provider uid username</code>)</li></ul> <h3 id="twitter-authentication"><a href="#twitter-authentication" class="header-anchor">#</a> Twitter Authentication</h3> <ul><li><a href="https://developer.twitter.com/en/apps" target="_blank" rel="noopener noreferrer">Twitter App<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>でアプリケーションを登録.</li> <li>API_KEYとAPI_SECRET_KEYを取得</li> <li>callback用のControllerを作成
<ul><li>omniauthで入手した情報を元に,</li> <li>登録されていた場合はログイン</li> <li>登録されていない場合は新しく追加</li> <li>という流れを踏む.</li></ul></li></ul> <h3 id="bugfix"><a href="#bugfix" class="header-anchor">#</a> bugfix</h3> <p><a href="https://teratail.com/questions/172791" target="_blank" rel="noopener noreferrer">teratailでの投稿([Rails]Deviseを用いたTwitter認証で出るOAuth::Unauthorized 403 Forbiddenを解消したい)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="twitterのみでログイン可能にする"><a href="#twitterのみでログイン可能にする" class="header-anchor">#</a> Twitterのみでログイン可能にする</h3> <ul><li>EmailおよびPassの情報をdummyのものと, Twitterからハッシュ化した文字列で代用する.</li></ul> <h3 id="めも"><a href="#めも" class="header-anchor">#</a> めも</h3> <ul><li>callback関数でバグるので, 本番環境でやっていた.</li> <li>Twitter Developersのcallback_urlに複数ルートを追加するとうまくいった.</li> <li>Vagrant使ってて, こういうパス関係に強くなってきた気がする</li></ul> <h3 id="参考資料"><a href="#参考資料" class="header-anchor">#</a> 参考資料</h3> <ul><li><a href="https://qiita.com/cigalecigales/items/f4274088f20832252374" target="_blank" rel="noopener noreferrer">[<em>Rails</em>] deviseの使い方（rails5版）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://saruwakakun.com/memo/omniauth-twitter" target="_blank" rel="noopener noreferrer">CallbackURLs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://saruwakakun.com/memo/omniauth-twitter" target="_blank" rel="noopener noreferrer">既存のRailsアプリにユーザ名とパスワードでログインできるようにする<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.freedom-man.com/rails-devise-omniauth/" target="_blank" rel="noopener noreferrer">初心者がRails+DeviseでTodoアプリ作る【Omniauth編】<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://qiita.com/nishina555/items/e5886339d381db61b412" target="_blank" rel="noopener noreferrer">[初心者向け] Ruby on Rails デバッグ方法まとめ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://techbooster.org/android/mashup/4525/" target="_blank" rel="noopener noreferrer">TWITTERでOAUTH認証を行う(1：TWITTERへのアプリケーション登録)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://qiita.com/ntkgcj/items/c3108c19fb64acc9dd8d" target="_blank" rel="noopener noreferrer">twitterアカウントでログイン devise+omniauth (rails5)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h1 id="_02-06"><a href="#_02-06" class="header-anchor">#</a> 02/06</h1> <h2 id="task-model-controllersの移行"><a href="#task-model-controllersの移行" class="header-anchor">#</a> Task Model &amp; Controllersの移行</h2> <p><code>$ rails g model Task name:string</code><br>
でモデル追加.</p> <p><a href="#todo">#todo</a>で書いた部分を改めてやるだけ.</p> <h2 id="メニューにtwitterloginを実装"><a href="#メニューにtwitterloginを実装" class="header-anchor">#</a> メニューにTwitterLoginを実装</h2> <ul><li>app/helpers/にomniauth用のメソッドをいくつか用意
<ul><li><a href="http://hajimete-ruby.jugem.jp/?cid=19" target="_blank" rel="noopener noreferrer">詳細はここ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><a href="#bootstrap%E3%81%AE%E8%BF%BD%E5%8A%A0">bootstrapの追加</a> <ul><li><code>Gemfile</code>にbootstrapを追加</li> <li><code>app/assets/javascripts/application.js</code>にrequireで追加</li></ul></li></ul> <h2 id="herokuにデプロイ"><a href="#herokuにデプロイ" class="header-anchor">#</a> Herokuにデプロイ</h2> <ul><li>heroku update</li> <li>heroku login</li> <li>heroku create</li> <li>gitでprodutionブランチを切る</li> <li>Herokuのadminページでgithubと連携</li> <li>heroku run rake db:migrate</li> <li>おわり</li></ul> <h2 id="結果"><a href="#結果" class="header-anchor">#</a> 結果</h2> <ul><li>ひとまずデプロイは成功</li> <li>PCだけでなく, 他のブラウザ, 機器からもアクセス可能なことを確認</li></ul> <h2 id="ブラウザの対応"><a href="#ブラウザの対応" class="header-anchor">#</a> ブラウザの対応</h2> <table><thead><tr><th style="text-align:center;">ブラウザ</th> <th style="text-align:center;">o/x</th></tr></thead> <tbody><tr><td style="text-align:center;">Google Chrome(MacOS)</td> <td style="text-align:center;">o</td></tr> <tr><td style="text-align:center;">Safari(MacOS)</td> <td style="text-align:center;">o</td></tr> <tr><td style="text-align:center;">FireFox(MacOS)</td> <td style="text-align:center;">x(表示が乱れるので, 修正の必要あり)</td></tr> <tr><td style="text-align:center;">Google Chrome(iPhone)</td> <td style="text-align:center;">o(レスポンシブデザインにすべき?)</td></tr> <tr><td style="text-align:center;">Safari(iPhone)</td> <td style="text-align:center;">o('')</td></tr></tbody></table> <h2 id="twitterへのメンション"><a href="#twitterへのメンション" class="header-anchor">#</a> Twitterへのメンション</h2> <ul><li>一定確率でTwitterにメンションを飛ばす.
<ul><li>確率は, 行ったTaskに関して重み付けをした方がよいかと</li></ul></li> <li>その通知を受け取る</li></ul> <h2 id="レスポンシブデザイン"><a href="#レスポンシブデザイン" class="header-anchor">#</a> レスポンシブデザイン</h2> <ul><li>これいいなって思う(scssの設定をいじればいい気がする)</li> <li>bootstrap -&gt; Materialにする気持ちも無きにしも非ず</li> <li>ただ, 機能面を重視したいので, これはあと回しでok</li></ul> <h1 id="_02-11"><a href="#_02-11" class="header-anchor">#</a> 02/11</h1> <h2 id="タスクの全表示がない"><a href="#タスクの全表示がない" class="header-anchor">#</a> タスクの全表示がない</h2> <ul><li>作る</li> <li><code>view/tasks/show.html.erb</code>を追加して, そこに入れれば良さそう?</li> <li>User1に対してnのTaskが振られているので, <code>view/users/index.html.erb</code>に入れる方が良さそう
<ul><li>(show.html.erbにすると, indexの作り方がわからなくなるため, 別の用途でindexが必要な時に変えれば問題ないかと)</li></ul></li></ul> <h3 id="設計-2"><a href="#設計-2" class="header-anchor">#</a> 設計</h3> <p>1パートのみで構成できる</p> <ul><li>Userの持つtasksを全て表示するだけ</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10ヶ月前</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.8f13348e.js" defer></script><script src="/assets/js/2.b8499f1b.js" defer></script><script src="/assets/js/76.715ed094.js" defer></script><script src="/assets/js/3.31e57b96.js" defer></script>
  </body>
</html>
