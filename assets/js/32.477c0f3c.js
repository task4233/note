(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{395:function(f,x,t){"use strict";t.r(x);var n=t(28),e=Object(n.a)({},(function(){var f=this,x=f.$createElement,t=f._self._c||x;return t("ContentSlotsDistributor",{attrs:{"slot-key":f.$parent.slotKey}},[t("h1",{attrs:{id:"segmentation-faultのお話"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#segmentation-faultのお話"}},[f._v("#")]),f._v(" segmentation faultのお話")]),f._v(" "),t("h2",{attrs:{id:"segmentation-faultとは"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#segmentation-faultとは"}},[f._v("#")]),f._v(" segmentation faultとは")]),f._v(" "),t("blockquote",[t("p",[f._v("セグメンテーション違反（英語：segmentation fault）はソフトウェアの実行時に起きる特定のエラー条件である。segfault（セグフォールト）と略される場合がある。 セグメンテーション違反はアクセスが許可されていないメモリ上の位置、もしくは許可されていない方法（例えばリードオンリーの位置へ書き込みをしようとする、もしくはオペレーティングシステムの部分を上書きしようとする）でメモリ上の位置にアクセスしようとするときに起こる。")])]),f._v(" "),t("p",[t("a",{attrs:{href:"https://ja.wikipedia.org/wiki/%E3%82%BB%E3%82%B0%E3%83%A1%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E9%81%95%E5%8F%8D",target:"_blank",rel:"noopener noreferrer"}},[f._v("セグメンテーション違反 @ Wikipediaより引用"),t("OutboundLink")],1)]),f._v(" "),t("p",[f._v("今回出てくるsegmentation faultは, 存在しない位置へのアクセスにより生じたものである。")]),f._v(" "),t("h2",{attrs:{id:"q1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#q1"}},[f._v("#")]),f._v(" Q1")]),f._v(" "),t("ul",[t("li",[f._v("Q. 以下のポインタ変数"),t("code",[f._v("s")]),f._v("はmain関数内で宣言した時点でallocateされているのか？")])]),f._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[f._v('int main(void) {\n  char* s;\n  s = "hoge";\n  puts(s);\n}\n')])])]),t("ul",[t("li",[f._v("A. されている。ポインタ変数はmain関数のローカル変数なので, スタックに積まれた段階で使用できる。")])]),f._v(" "),t("p",[f._v("ただし, 以下のような代入はsegmentation faultが発生する。"),t("br"),f._v("\nなぜなら, "),t("code",[f._v("*s")]),f._v("は参照外しが行われており, allocateされていないデータに対しるアクセスが発生するためである。")]),f._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[f._v('int main(void) {\n  char* s;\n  *s = "hoge";\n  puts(s);\n}\n')])])]),t("h2",{attrs:{id:"q2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#q2"}},[f._v("#")]),f._v(" Q2")]),f._v(" "),t("ul",[t("li",[f._v("Q. 上の例ではsegmentation faultが発生するが, 下の例ではsegmentation faultが発生しなかった。なぜか？")])]),f._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[f._v('#include <stdio.h>\n\nvoid func(char* c) {\n  c = "B";\n}\n\nint main(void) {\n  char* c2;\n  func(c2);\n  printf("%s\\n", c2);\n}\n')])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[f._v('#include <stdio.h>\n\nvoid func(char* c) {\n  c = "B";\n}\n\nint main(void) {\n  char* c;\n  c = "A";\n  printf("%s\\n", c);  \n\n  char* c2; \n  func(c2);\n  printf("%s\\n", c2);\n}\n')])])]),t("ul",[t("li",[f._v("A. 偶然。具体的には, 下の例では偶然c2の参照先とスタック上のデータがアクセス許可されている値になったためである。その根拠として, gdbによるデバッグを行うと以下の結果が得られた。")])]),f._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[f._v('gdb-peda$ s\n[----------------------------------registers-----------------------------------]\nRAX: 0x7ffff7faad60 --\x3e 0x7fffffffe298 --\x3e 0x7fffffffe579 ("SHELL=/bin/bash")\nRBX: 0x0 \nRCX: 0x7ffff7fa7718 --\x3e 0x7ffff7fa9a40 --\x3e 0x0 \nRDX: 0x7fffffffe298 --\x3e 0x7fffffffe579 ("SHELL=/bin/bash")\nRSI: 0x7fffffffe288 --\x3e 0x7fffffffe566 ("/root/work/2/test2")\nRDI: 0x1 \nRBP: 0x401190 (<__libc_csu_init>:\tpush   r15)\nRSP: 0x7fffffffe198 --\x3e 0x0 \nRIP: 0x40119e (<__libc_csu_init+14>:\tpush   r13)\nR8 : 0x7ffff7fa9a50 --\x3e 0x4 \nR9 : 0x7ffff7fe4780 (<_dl_fini>:\tpush   rbp)\nR10: 0x0 \nR11: 0x27 ("\'")\nR12: 0x401040 (<_start>:\txor    ebp,ebp)\nR13: 0x7fffffffe280 --\x3e 0x1 \nR14: 0x7fffffffe298 --\x3e 0x7fffffffe579 ("SHELL=/bin/bash")\nR15: 0x403e10 --\x3e 0x401120 (<frame_dummy>:\tjmp    0x4010b0 <register_tm_clones>)\nEFLAGS: 0x206 (carry PARITY adjust zero sign trap INTERRUPT direction overflow)\n[-------------------------------------code-------------------------------------]\n   0x401192 <__libc_csu_init+2>:\tlea    r15,[rip+0x2c77]        # 0x403e10\n   0x401199 <__libc_csu_init+9>:\tpush   r14\n   0x40119b <__libc_csu_init+11>:\tmov    r14,rdx\n=> 0x40119e <__libc_csu_init+14>:\tpush   r13\n   0x4011a0 <__libc_csu_init+16>:\tmov    r13,rsi\n   0x4011a3 <__libc_csu_init+19>:\tpush   r12\n   0x4011a5 <__libc_csu_init+21>:\tmov    r12d,edi\n   0x4011a8 <__libc_csu_init+24>:\tpush   rbp\n[------------------------------------stack-------------------------------------]\n0000| 0x7fffffffe198 --\x3e 0x0 \n0008| 0x7fffffffe1a0 --\x3e 0x0 \n0016| 0x7fffffffe1a8 --\x3e 0x7ffff7e14b4a (<__libc_start_main+122>:\tmov    rax,QWORD PTR [rip+0x19230f]        # 0x7ffff7fa6e60)\n0024| 0x7fffffffe1b0 --\x3e 0x0 \n0032| 0x7fffffffe1b8 --\x3e 0x7fffffffe288 --\x3e 0x7fffffffe566 ("/root/work/2/test2")\n0040| 0x7fffffffe1c0 --\x3e 0x100040000 \n0048| 0x7fffffffe1c8 --\x3e 0x401151 (<main>:\tpush   rbp)\n0056| 0x7fffffffe1d0 --\x3e 0x0 \n[------------------------------------------------------------------------------]\nLegend: code, data, rodata, value\n0x000000000040119e in __libc_csu_init ()\ngdb-peda$ x/64b 0x7fffffffe190\n0x7fffffffe190:\t0x90\t0x11\t0x40\t0x00\t0x00\t0x00\t0x00\t0x00\n0x7fffffffe198:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x7fffffffe1a0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x7fffffffe1a8:\t0x4a\t0x4b\t0xe1\t0xf7\t0xff\t0x7f\t0x00\t0x00\n0x7fffffffe1b0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x7fffffffe1b8:\t0x88\t0xe2\t0xff\t0xff\t0xff\t0x7f\t0x00\t0x00\n0x7fffffffe1c0:\t0x00\t0x00\t0x04\t0x00\t0x01\t0x00\t0x00\t0x00\n0x7fffffffe1c8:\t0x51\t0x11\t0x40\t0x00\t0x00\t0x00\t0x00\t0x00\ngdb-peda$ s\n[----------------------------------registers-----------------------------------]\nRAX: 0x7ffff7faad60 --\x3e 0x7fffffffe298 --\x3e 0x7fffffffe579 ("SHELL=/bin/bash")\nRBX: 0x0 \nRCX: 0x7ffff7fa7718 --\x3e 0x7ffff7fa9a40 --\x3e 0x0 \nRDX: 0x7fffffffe298 --\x3e 0x7fffffffe579 ("SHELL=/bin/bash")\nRSI: 0x7fffffffe288 --\x3e 0x7fffffffe566 ("/root/work/2/test2")\nRDI: 0x1 \nRBP: 0x401190 (<__libc_csu_init>:\tpush   r15)\nRSP: 0x7fffffffe190 --\x3e 0x7fffffffe280 --\x3e 0x1 \nRIP: 0x4011a0 (<__libc_csu_init+16>:\tmov    r13,rsi)\nR8 : 0x7ffff7fa9a50 --\x3e 0x4 \nR9 : 0x7ffff7fe4780 (<_dl_fini>:\tpush   rbp)\nR10: 0x0 \nR11: 0x27 ("\'")\nR12: 0x401040 (<_start>:\txor    ebp,ebp)\nR13: 0x7fffffffe280 --\x3e 0x1 \nR14: 0x7fffffffe298 --\x3e 0x7fffffffe579 ("SHELL=/bin/bash")\nR15: 0x403e10 --\x3e 0x401120 (<frame_dummy>:\tjmp    0x4010b0 <register_tm_clones>)\nEFLAGS: 0x206 (carry PARITY adjust zero sign trap INTERRUPT direction overflow)\n[-------------------------------------code-------------------------------------]\n   0x401199 <__libc_csu_init+9>:\tpush   r14\n   0x40119b <__libc_csu_init+11>:\tmov    r14,rdx\n   0x40119e <__libc_csu_init+14>:\tpush   r13\n=> 0x4011a0 <__libc_csu_init+16>:\tmov    r13,rsi\n   0x4011a3 <__libc_csu_init+19>:\tpush   r12\n   0x4011a5 <__libc_csu_init+21>:\tmov    r12d,edi\n   0x4011a8 <__libc_csu_init+24>:\tpush   rbp\n   0x4011a9 <__libc_csu_init+25>:\tlea    rbp,[rip+0x2c68]        # 0x403e18\n[------------------------------------stack-------------------------------------]\n0000| 0x7fffffffe190 --\x3e 0x7fffffffe280 --\x3e 0x1 \n0008| 0x7fffffffe198 --\x3e 0x0 \n0016| 0x7fffffffe1a0 --\x3e 0x0 \n0024| 0x7fffffffe1a8 --\x3e 0x7ffff7e14b4a (<__libc_start_main+122>:\tmov    rax,QWORD PTR [rip+0x19230f]        # 0x7ffff7fa6e60)\n0032| 0x7fffffffe1b0 --\x3e 0x0 \n0040| 0x7fffffffe1b8 --\x3e 0x7fffffffe288 --\x3e 0x7fffffffe566 ("/root/work/2/test2")\n0048| 0x7fffffffe1c0 --\x3e 0x100040000 \n0056| 0x7fffffffe1c8 --\x3e 0x401151 (<main>:\tpush   rbp)\n[------------------------------------------------------------------------------]\nLegend: code, data, rodata, value\n0x00000000004011a0 in __libc_csu_init ()\ngdb-peda$ x/64b 0x7fffffffe190\n0x7fffffffe190:\t0x80\t0xe2\t0xff\t0xff\t0xff\t0x7f\t0x00\t0x00\n0x7fffffffe198:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x7fffffffe1a0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x7fffffffe1a8:\t0x4a\t0x4b\t0xe1\t0xf7\t0xff\t0x7f\t0x00\t0x00\n0x7fffffffe1b0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x7fffffffe1b8:\t0x88\t0xe2\t0xff\t0xff\t0xff\t0x7f\t0x00\t0x00\n0x7fffffffe1c0:\t0x00\t0x00\t0x04\t0x00\t0x01\t0x00\t0x00\t0x00\n0x7fffffffe1c8:\t0x51\t0x11\t0x40\t0x00\t0x00\t0x00\t0x00\t0x00\ngdb-peda$ info registers\nrax            0x7ffff7faad60      0x7ffff7faad60\nrbx            0x0                 0x0\nrcx            0x7ffff7fa7718      0x7ffff7fa7718\nrdx            0x7fffffffe298      0x7fffffffe298\nrsi            0x7fffffffe288      0x7fffffffe288\nrdi            0x1                 0x1\nrbp            0x401190            0x401190 <__libc_csu_init>\nrsp            0x7fffffffe190      0x7fffffffe190\nr8             0x7ffff7fa9a50      0x7ffff7fa9a50\nr9             0x7ffff7fe4780      0x7ffff7fe4780\nr10            0x0                 0x0\nr11            0x27                0x27\nr12            0x401040            0x401040\nr13            0x7fffffffe280      0x7fffffffe280\nr14            0x7fffffffe298      0x7fffffffe298\nr15            0x403e10            0x403e10\nrip            0x4011a0            0x4011a0 <__libc_csu_init+16>\neflags         0x206               [ PF IF ]\ncs             0x33                0x33\nss             0x2b                0x2b\nds             0x0                 0x0\nes             0x0                 0x0\nfs             0x0                 0x0\ngs             0x0                 0x0\n\n\n')])])]),t("p",[f._v("以上より, r13をpushしたことにより, "),t("code",[f._v("0x7fffffffe190")]),f._v("の値が書き換わっていることがわかる。"),t("br"),f._v("\nその上でmainを見ると以下のように, main+43で"),t("code",[f._v("mov rax,QWORD PTR [rbp-0x10]")]),f._v("を実行している。ここで, rbpは"),t("code",[f._v("0x7fffffffe1a0")]),f._v("なので, "),t("code",[f._v("[rbp-10]")]),f._v(" "),t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",[t("semantics",[t("mrow",[t("mo",[f._v("⇔")])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[f._v("\\Leftrightarrow")])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.36687em","vertical-align":"0em"}}),t("span",{staticClass:"mrel"},[f._v("⇔")])])])]),f._v(" "),t("code",[f._v("[0x7fffffffe190]")]),f._v(" "),t("span",{staticClass:"katex"},[t("span",{staticClass:"katex-mathml"},[t("math",[t("semantics",[t("mrow",[t("mo",[f._v("⇔")])],1),t("annotation",{attrs:{encoding:"application/x-tex"}},[f._v("\\Leftrightarrow")])],1)],1)],1),t("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"base"},[t("span",{staticClass:"strut",staticStyle:{height:"0.36687em","vertical-align":"0em"}}),t("span",{staticClass:"mrel"},[f._v("⇔")])])])]),f._v(" "),t("code",[f._v("0x7fffffff2e80")]),f._v("である。そのため, "),t("code",[f._v("rax")]),f._v("にこの値が入り, "),t("code",[f._v("printf()")]),f._v("で参照されるため, segmentation faultは発生しないという訳である。")]),f._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[f._v('gdb-peda$ disas main\nDump of assembler code for function main:\n   0x0000000000401151 <+0>:\tpush   rbp\n   0x0000000000401152 <+1>:\tmov    rbp,rsp\n   0x0000000000401155 <+4>:\tsub    rsp,0x10\n   0x0000000000401159 <+8>:\tlea    rax,[rip+0xea8]        # 0x402008\n   0x0000000000401160 <+15>:\tmov    QWORD PTR [rbp-0x8],rax\n   0x0000000000401164 <+19>:\tmov    rax,QWORD PTR [rbp-0x8]\n   0x0000000000401168 <+23>:\tmov    rdi,rax\n   0x000000000040116b <+26>:\tcall   0x401030 <puts@plt>\n   0x0000000000401170 <+31>:\tmov    rax,QWORD PTR [rbp-0x10]\n   0x0000000000401174 <+35>:\tmov    rdi,rax\n   0x0000000000401177 <+38>:\tcall   0x401122 <func>\n   0x000000000040117c <+43>:\tmov    rax,QWORD PTR [rbp-0x10]\n   0x0000000000401180 <+47>:\tmov    rdi,rax\n   0x0000000000401183 <+50>:\tcall   0x401030 <puts@plt>\n   0x0000000000401188 <+55>:\tmov    eax,0x0\n   0x000000000040118d <+60>:\tleave  \n   0x000000000040118e <+61>:\tret    \nEnd of assembler dump.\ngdb-peda$ info registers \nThe program has no registers now.\ngdb-peda$ b main+43\nFunction "main+43" not defined.\ngdb-peda$ b *0x401170\nBreakpoint 1 at 0x401170\ngdb-peda$ r\nStarting program: /root/work/2/test2 \nA\n[----------------------------------registers-----------------------------------]\nRAX: 0x2 \nRBX: 0x0 \nRCX: 0x7ffff7ed9904 (<__GI___libc_write+20>:\tcmp    rax,0xfffffffffffff000)\nRDX: 0x7ffff7faa580 --\x3e 0x0 \nRSI: 0x405260 --\x3e 0xa41 (\'A\\n\')\nRDI: 0x0 \nRBP: 0x7fffffffe1a0 --\x3e 0x401190 (<__libc_csu_init>:\tpush   r15)\nRSP: 0x7fffffffe190 --\x3e 0x7fffffffe280 --\x3e 0x1 \nRIP: 0x401170 (<main+31>:\tmov    rax,QWORD PTR [rbp-0x10])\nR8 : 0x2 \nR9 : 0x7ffff7e92f90 (<__wcpcpy>:\tlea    rax,[rdi-0x4])\nR10: 0x410 \nR11: 0x246 \nR12: 0x401040 (<_start>:\txor    ebp,ebp)\nR13: 0x7fffffffe280 --\x3e 0x1 \nR14: 0x0 \nR15: 0x0\nEFLAGS: 0x246 (carry PARITY adjust ZERO sign trap INTERRUPT direction overflow)\n[-------------------------------------code-------------------------------------]\n   0x401164 <main+19>:\tmov    rax,QWORD PTR [rbp-0x8]\n   0x401168 <main+23>:\tmov    rdi,rax\n   0x40116b <main+26>:\tcall   0x401030 <puts@plt>\n=> 0x401170 <main+31>:\tmov    rax,QWORD PTR [rbp-0x10]\n   0x401174 <main+35>:\tmov    rdi,rax\n   0x401177 <main+38>:\tcall   0x401122 <func>\n   0x40117c <main+43>:\tmov    rax,QWORD PTR [rbp-0x10]\n   0x401180 <main+47>:\tmov    rdi,rax\n[------------------------------------stack-------------------------------------]\n0000| 0x7fffffffe190 --\x3e 0x7fffffffe280 --\x3e 0x1 \n0008| 0x7fffffffe198 --\x3e 0x402008 --\x3e 0x3b031b0100000041 \n0016| 0x7fffffffe1a0 --\x3e 0x401190 (<__libc_csu_init>:\tpush   r15)\n0024| 0x7fffffffe1a8 --\x3e 0x7ffff7e14bbb (<__libc_start_main+235>:\tmov    edi,eax)\n0032| 0x7fffffffe1b0 --\x3e 0x0 \n0040| 0x7fffffffe1b8 --\x3e 0x7fffffffe288 --\x3e 0x7fffffffe566 ("/root/work/2/test2")\n0048| 0x7fffffffe1c0 --\x3e 0x100040000 \n0056| 0x7fffffffe1c8 --\x3e 0x401151 (<main>:\tpush   rbp)\n[------------------------------------------------------------------------------]\nLegend: code, data, rodata, value\n\nBreakpoint 1, 0x0000000000401170 in main ()\ngdb-peda$ info registers \nrax            0x2                 0x2\nrbx            0x0                 0x0\nrcx            0x7ffff7ed9904      0x7ffff7ed9904\nrdx            0x7ffff7faa580      0x7ffff7faa580\nrsi            0x405260            0x405260\nrdi            0x0                 0x0\nrbp            0x7fffffffe1a0      0x7fffffffe1a0\nrsp            0x7fffffffe190      0x7fffffffe190\nr8             0x2                 0x2\nr9             0x7ffff7e92f90      0x7ffff7e92f90\nr10            0x410               0x410\nr11            0x246               0x246\nr12            0x401040            0x401040\nr13            0x7fffffffe280      0x7fffffffe280\nr14            0x0                 0x0\nr15            0x0                 0x0\nrip            0x401170            0x401170 <main+31>\neflags         0x246               [ PF ZF IF ]\ncs             0x33                0x33\nss             0x2b                0x2b\nds             0x0                 0x0\nes             0x0                 0x0\nfs             0x0                 0x0\ngs             0x0                 0x0\ngdb-peda$ x/64b 0x0x7fffffffe190\nInvalid number "0x0x7fffffffe190".\ngdb-peda$ x/64b 0x7fffffffe190\n0x7fffffffe190:\t0x80\t0xe2\t0xff\t0xff\t0xff\t0x7f\t0x00\t0x00\n0x7fffffffe198:\t0x08\t0x20\t0x40\t0x00\t0x00\t0x00\t0x00\t0x00\n0x7fffffffe1a0:\t0x90\t0x11\t0x40\t0x00\t0x00\t0x00\t0x00\t0x00\n0x7fffffffe1a8:\t0xbb\t0x4b\t0xe1\t0xf7\t0xff\t0x7f\t0x00\t0x00\n0x7fffffffe1b0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x7fffffffe1b8:\t0x88\t0xe2\t0xff\t0xff\t0xff\t0x7f\t0x00\t0x00\n0x7fffffffe1c0:\t0x00\t0x00\t0x04\t0x00\t0x01\t0x00\t0x00\t0x00\n0x7fffffffe1c8:\t0x51\t0x11\t0x40\t0x00\t0x00\t0x00\t0x00\t0x00\ngdb-peda$ s\n[----------------------------------registers-----------------------------------]\nRAX: 0x7fffffffe280 --\x3e 0x1 \nRBX: 0x0 \nRCX: 0x7ffff7ed9904 (<__GI___libc_write+20>:\tcmp    rax,0xfffffffffffff000)\nRDX: 0x7ffff7faa580 --\x3e 0x0 \nRSI: 0x405260 --\x3e 0xa41 (\'A\\n\')\nRDI: 0x0 \nRBP: 0x7fffffffe1a0 --\x3e 0x401190 (<__libc_csu_init>:\tpush   r15)\nRSP: 0x7fffffffe190 --\x3e 0x7fffffffe280 --\x3e 0x1 \nRIP: 0x401174 (<main+35>:\tmov    rdi,rax)\nR8 : 0x2 \nR9 : 0x7ffff7e92f90 (<__wcpcpy>:\tlea    rax,[rdi-0x4])\nR10: 0x410 \nR11: 0x246 \nR12: 0x401040 (<_start>:\txor    ebp,ebp)\nR13: 0x7fffffffe280 --\x3e 0x1 \nR14: 0x0 \nR15: 0x0\nEFLAGS: 0x246 (carry PARITY adjust ZERO sign trap INTERRUPT direction overflow)\n[-------------------------------------code-------------------------------------]\n   0x401168 <main+23>:\tmov    rdi,rax\n   0x40116b <main+26>:\tcall   0x401030 <puts@plt>\n   0x401170 <main+31>:\tmov    rax,QWORD PTR [rbp-0x10]\n=> 0x401174 <main+35>:\tmov    rdi,rax\n   0x401177 <main+38>:\tcall   0x401122 <func>\n   0x40117c <main+43>:\tmov    rax,QWORD PTR [rbp-0x10]\n   0x401180 <main+47>:\tmov    rdi,rax\n   0x401183 <main+50>:\tcall   0x401030 <puts@plt>\n[------------------------------------stack-------------------------------------]\n0000| 0x7fffffffe190 --\x3e 0x7fffffffe280 --\x3e 0x1 \n0008| 0x7fffffffe198 --\x3e 0x402008 --\x3e 0x3b031b0100000041 \n0016| 0x7fffffffe1a0 --\x3e 0x401190 (<__libc_csu_init>:\tpush   r15)\n0024| 0x7fffffffe1a8 --\x3e 0x7ffff7e14bbb (<__libc_start_main+235>:\tmov    edi,eax)\n0032| 0x7fffffffe1b0 --\x3e 0x0 \n0040| 0x7fffffffe1b8 --\x3e 0x7fffffffe288 --\x3e 0x7fffffffe566 ("/root/work/2/test2")\n0048| 0x7fffffffe1c0 --\x3e 0x100040000 \n0056| 0x7fffffffe1c8 --\x3e 0x401151 (<main>:\tpush   rbp)\n[------------------------------------------------------------------------------]\nLegend: code, data, rodata, value\n0x0000000000401174 in main ()\ngdb-peda$ s\n[----------------------------------registers-----------------------------------]\nRAX: 0x7fffffffe280 --\x3e 0x1 \nRBX: 0x0 \nRCX: 0x7ffff7ed9904 (<__GI___libc_write+20>:\tcmp    rax,0xfffffffffffff000)\nRDX: 0x7ffff7faa580 --\x3e 0x0 \nRSI: 0x405260 --\x3e 0xa41 (\'A\\n\')\nRDI: 0x7fffffffe280 --\x3e 0x1 \nRBP: 0x7fffffffe1a0 --\x3e 0x401190 (<__libc_csu_init>:\tpush   r15)\nRSP: 0x7fffffffe190 --\x3e 0x7fffffffe280 --\x3e 0x1 \nRIP: 0x401177 (<main+38>:\tcall   0x401122 <func>)\nR8 : 0x2 \nR9 : 0x7ffff7e92f90 (<__wcpcpy>:\tlea    rax,[rdi-0x4])\nR10: 0x410 \nR11: 0x246 \nR12: 0x401040 (<_start>:\txor    ebp,ebp)\nR13: 0x7fffffffe280 --\x3e 0x1 \nR14: 0x0 \nR15: 0x0\nEFLAGS: 0x246 (carry PARITY adjust ZERO sign trap INTERRUPT direction overflow)\n[-------------------------------------code-------------------------------------]\n   0x40116b <main+26>:\tcall   0x401030 <puts@plt>\n   0x401170 <main+31>:\tmov    rax,QWORD PTR [rbp-0x10]\n   0x401174 <main+35>:\tmov    rdi,rax\n=> 0x401177 <main+38>:\tcall   0x401122 <func>\n   0x40117c <main+43>:\tmov    rax,QWORD PTR [rbp-0x10]\n   0x401180 <main+47>:\tmov    rdi,rax\n   0x401183 <main+50>:\tcall   0x401030 <puts@plt>\n   0x401188 <main+55>:\tmov    eax,0x0\nGuessed arguments:\narg[0]: 0x7fffffffe280 --\x3e 0x1 \n[------------------------------------stack-------------------------------------]\n0000| 0x7fffffffe190 --\x3e 0x7fffffffe280 --\x3e 0x1 \n0008| 0x7fffffffe198 --\x3e 0x402008 --\x3e 0x3b031b0100000041 \n0016| 0x7fffffffe1a0 --\x3e 0x401190 (<__libc_csu_init>:\tpush   r15)\n0024| 0x7fffffffe1a8 --\x3e 0x7ffff7e14bbb (<__libc_start_main+235>:\tmov    edi,eax)\n0032| 0x7fffffffe1b0 --\x3e 0x0 \n0040| 0x7fffffffe1b8 --\x3e 0x7fffffffe288 --\x3e 0x7fffffffe566 ("/root/work/2/test2")\n0048| 0x7fffffffe1c0 --\x3e 0x100040000 \n0056| 0x7fffffffe1c8 --\x3e 0x401151 (<main>:\tpush   rbp)\n[------------------------------------------------------------------------------]\nLegend: code, data, rodata, value\n0x0000000000401177 in main ()\ngdb-peda$ info registers \nrax            0x7fffffffe280      0x7fffffffe280\nrbx            0x0                 0x0\nrcx            0x7ffff7ed9904      0x7ffff7ed9904\nrdx            0x7ffff7faa580      0x7ffff7faa580\nrsi            0x405260            0x405260\nrdi            0x7fffffffe280      0x7fffffffe280\nrbp            0x7fffffffe1a0      0x7fffffffe1a0\nrsp            0x7fffffffe190      0x7fffffffe190\nr8             0x2                 0x2\nr9             0x7ffff7e92f90      0x7ffff7e92f90\nr10            0x410               0x410\nr11            0x246               0x246\nr12            0x401040            0x401040\nr13            0x7fffffffe280      0x7fffffffe280\nr14            0x0                 0x0\nr15            0x0                 0x0\nrip            0x401177            0x401177 <main+38>\neflags         0x246               [ PF ZF IF ]\ncs             0x33                0x33\nss             0x2b                0x2b\nds             0x0                 0x0\nes             0x0                 0x0\nfs             0x0                 0x0\ngs             0x0                 0x0\n')])])]),t("h1",{attrs:{id:"最後に"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最後に"}},[f._v("#")]),f._v(" 最後に")]),f._v(" "),t("p",[f._v("未初期化変数は不安定なので今回のようなことが起きる。"),t("strong",[f._v("変数は初期化するべきである")]),f._v("。")]),f._v(" "),t("p",[f._v("また, 今回の問題の解決に"),t("a",{attrs:{href:"https://twitter.com/zunzun_meow",target:"_blank",rel:"noopener noreferrer"}},[f._v("@zunzun_meow"),t("OutboundLink")],1),f._v("さん, "),t("a",{attrs:{href:"https://twitter.com/Nperair",target:"_blank",rel:"noopener noreferrer"}},[f._v("@Nperair"),t("OutboundLink")],1),f._v("さん, "),t("a",{attrs:{href:"https://twitter.com/yuki_obuchi",target:"_blank",rel:"noopener noreferrer"}},[f._v("@yuki_obuchi"),t("OutboundLink")],1),f._v("さん, "),t("a",{attrs:{href:"https://twitter.com/onokatio_",target:"_blank",rel:"noopener noreferrer"}},[f._v("onokatio_"),t("OutboundLink")],1),f._v("さん, "),t("a",{attrs:{href:"https://twitter.com/xrekkusu",target:"_blank",rel:"noopener noreferrer"}},[f._v("@xrekkusu"),t("OutboundLink")],1),f._v("さんにお手伝いいただきました。この場をお借りして感謝申し上げます。")]),f._v(" "),t("p",[f._v("以上。")])])}),[],!1,null,null,null);x.default=e.exports}}]);